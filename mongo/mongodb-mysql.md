# 应用场景分析

#### 一、 MySQL与MongoDB简单对比

| 存储方式     | MySQL                                        | MongoDB                                            |
| ------------ | -------------------------------------------- | -------------------------------------------------- |
| 数据库模型   | 关系型                                       | 非关系型 |
| 存储方式     | 不同的引擎有不同的存储方式                   | 虚拟内存+持久化                                    |
| 查询语句     | 传统的SQL语句                                | 独特的MongoDB查询方式                              |
| 架构特点     | 常见有单节点， M-S, MHA, MMM, cluster 等架构 | 通过副本集，以及分片来实现高可用                   |
| 数据处理方式 | 不同的引擎有不同的特点                       | 基于内存，将热数据存在物理内存中，从而达到高速读写 |
|成熟度|拥有较为成熟的体系，成熟度较高|新型数据库，成熟度较低
|广泛度|开源数据库的份额不断增加，MySQL份额也不短增加|Nosql数据库中，MongoDB较为完善，使用人数也不短增加|

#### 二、MongoDB优点

- <font color=red><b>快速! </b></font>拥有适量级内存的Mongodb的性能是非常迅速的，它将热数据存储在物理内存中(而不仅仅是索引和少部分数据)，使得热数据的读写变得十分快速，从而提高了整体的速度与效率
- <font color=red><b>高扩展性！</b></font>Mongodb的高可用与集群架构拥有十分高的扩展性，通过物理机器的增加，以及sharding的增加，Mongodb的扩展将达到一个十分惊人的地步
- <font color=red><b>自身的Failover机制！</b></font>Mongodb的副本集配置中，当主库遇到问题，无法继续提供服务的时候，副本集将选举出一个新的主库来继续提供服务
- <font color=red><b>Json的存储格式！</b></font>Mongodb的Json与Bson存储格式十分适合文档格式的存储与查询。 


#### 三、MongoDB的应用场景

- <font color=red><b>表结构不明确且数据不断变大 </b></font>
  MongoDB是非结构化文档数据库，扩展字段很容易且不会影响原有数据。

  内容管理或者博客平台等 例如圈子系统，存储用户评论之类的

- <font color=red><b>更高的写入负载 </b></font>
  MongoDB侧重高数据写入的性能，而非事务安全，适合业务系统中有大量“低价值”数据的场景。

  本身存的就是json格式数据 例如做日志系统 

- <font color=red><b>数据量很大或者将来会变得很大 </b></font>
  Mysql单表数据量达到5-10G时会出现明细的性能降级，需要做数据的水平和垂直拆分、库的拆分完成扩展

  MongoDB内建了sharding、很多数据分片的特性，容易水平扩展，比较好的适应大数据量增长的需求。 

- <font color=red><b>高可用性 </b></font>
  自带高可用，自动主从切换（副本集）

- <font color=red><b>不适用的场景 </b></font>
  MongoDB不支持事务操作，需要用到事务的应用建议不用MongoDB
  MongoDB目前不支持join操作，需要复杂查询的应用也不建议使用MongoDB

#### 四、关系型数据库和非关系型数据库的应用场景对比

- <font color=red><b>关系型数据库适合存储结构化数据</b></font>，如用户的帐号、地址
  
  1）这些数据通常需要做结构化查询，比如join，这时候，关系型数据库就要胜出一筹 
  
  2）这些数据的规模、增长的速度通常是可以预期的 
  
  3）事务性、一致性 
  
- <font color=red><b>NoSQL适合存储非结构化数据</b></font>，如文章、评论： 
  
  1）这些数据通常用于模糊处理，如全文搜索、机器学习 
  
  2）这些数据是海量的，而且增长的速度是难以预期的， 
  
  3）根据数据的特点，NoSQL数据库通常具有无限（至少接近）伸缩性 
  
  4）按key获取数据效率很高，但是对join或其他结构化查询的支持就比较差

#### 五、MySQL与MongoDB在使用时又该如何去选择呢

- <font color=red><b>相比较MySQL，MongoDB数据库更适合那些读作业较重的任务模型</b></font>
  MongoDB能充分利用机器的内存资源。如果机器的内存资源丰富的话，MongoDB的查询效率会快很多

- <font color=red><b>相比MongoDB，MySQL数据库更适合插入、更新为主的任务模型，其效率相比于MongoDB优势非常明显</b></font>

- <font color=red><b>在带”_id”插入数据的时候，MongoDB的插入效率其实并不高</b></font>

  如果想充分利用MongoDB性能的话，推荐采取不带”_id”的插入方式，然后对相关字段作索引来查询。

- <font color=red><b>MongoDB适合那些对数据库具体数据格式不明确或者数据库数据格式经常变化的需求模型，而且对开发者十分友好</b></font>

  MongoDB用之前不用想太多；而MySQL使用之前，必须提前建库建表，并明确数据的具体格式，约束较大。

- <font color=red><b>稳定性方面，MongoDB不如MySQL</b></font>

  MySQL是一种非常稳定的数据库，无论在指定主键还是在不指定主键插入的情况下，其效率都差不了太多, 其稳定性可以说是毋庸置疑的

- <font color=red><b>事务支持方面，MySQL占绝对优势，MongoDB对事务关系支持薄弱</b></font>

  事务可以说是所有NoSQL数据库共同的缺陷，不过NoSQL并不是为了事务关系而设计的，具体应用还是很需求

参考文章

-  [mongoDB和mysql对比分析及选](https://blog.csdn.net/liao0801_123/article/details/89373494)

- https://www.cnblogs.com/1488boss/p/10754290.html
- 其它