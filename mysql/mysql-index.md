## 第八章 索引创建

### 8.1、索引

**一、含义**

​	索引（index）是帮助MySQL高效获取数据的一种有序的数据结构

**二、特点**

- ```sql
  - 类似于书籍的目录索引，提高数据检索的效率，降低数据库的IO成本
  - 通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗
  ```

- ```
  - 实际上索引也是一张表，该表中保存了主键与索引字段，并指向实体类的记录，所以索引列也是要占用空间的
  - 虽然索引大大提高了查询效率，同时却也降低更新表的速度，如对表进行INSERT、UPDATE、DELETE。
  因为更新表时，MySQL 不仅要保存数据，
  还要保存一下索引文件每次更新添加了索引列的字段，都会调整因为更新所带来的键值变化后的索引信息
  ```

**三、语法**

- 创建
  ```sql
  CREATE 【 UNIQUE|FULLTEXT|SPATIAL 】 INDEX 索引名称 ON 表名(字段列表);
  ```

- 修改
  ```sql
  先删除，在创建
  ```
- 删除
  ```sql
  DROP INDEX 索引名称 ON 表名;
  ```
- 查看
  ```sql
  SHOW INDEX FROM 表名;
  ```
- alter命令
  ```sql
  该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL
  ALTER TABLE 表名 ADD PRIMARY KEY(字段列表); 
  	
  这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）
  ALTER TABLE 表名 ADD UNIQUE 索引名称(字段列表);
  	
  添加普通索引，索引值可以出现多次。
  ALTER TABLE 表名 ADD INDEX 索引名称(字段列表);
  	
  该语句指定了索引为FULLTEXT，用于全文索引	
  ALTER TABLE 表名 ADD FULLTEXT 索引名称(字段列表);
  1234567891011
  ```

**四、注意**

索引的设计可以遵循一些已有的原则，创建索引的时候请尽量考虑符合这些原则，便于提升索引的使用效率，更高效的使用索引：

1. 索引字段的选择，最佳候选列应当从where子句的条件中提取，如果where子句中的组合比较多，那么应当挑选最常用、过滤效果最好的列的组合
2. 索引可以有效的提升查询数据的效率，但索引数量不是多多益善，索引越多，维护索引的代价自然也就水涨船高。对于插入、更新、删除等DML操作比较频繁的表来说，索引过多，会引入相当高的维护代价，降低DML操作的效率，增加相应操作的时间消耗。另外索引过多的话，MySQL也会犯选择困难病，虽然最终仍然会找到一个可用的索引，但无疑提高了选择的代价
3. 对查询频次较高，且数据量比较大的表建立索引
4. 使用唯一索引，区分度越高，使用索引的效率越高
5. 使用短索引，索引创建之后也是使用硬盘来存储的，因此提升索引访问的I/O效率，也可以提升总体的访问效率。假如构成索引的字段总长度比较短，那么在给定大小的存储块内可以存储更多的索引值，相应的可以有效的提升MySQL访问索引的I/O效率
6. 使用组合索引，如果查询时where子句中使用了组成该索引的前几个字段，那么这条查询SQL可以利用组合索引来提升查询效率。例如：CREATE INDEX idx_name_email_status ON tb_seller(name,email,status); 就相当于对name 创建索引；对name , email 创建了索引；对name , email, status 创建了索引

